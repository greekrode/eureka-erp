---
import 'intl-tel-input/build/css/intlTelInput.css'
---

<div id="contact-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50 opacity-0 transition-opacity duration-300">
	<div class="sm:mx-auto sm:w-2/3 md:w-1/2 lg:w-2/5">
		<div class="relative flex flex-col gap-6 rounded-2xl bg-white p-8">
			<a href="/" aria-label="logo" class="flex items-center space-x-2">
				<div aria-hidden="true" class="flex space-x-1">
					<img src="./images/logo.png" class="mx-auto h-10 w-auto" alt="Eureka Logo" />
				</div>
				<span class="text-2xl font-bold text-gray-900">Eureka</span>
			</a>
			<button id="close-modal" class="absolute right-4 top-4 text-4xl text-red-500 hover:text-gray-900"> &times; </button>
			<form action="" class="space-y-8">
				<div>
					<h1 class="text-xl font-semibold text-gray-900">Fill in this form</h1>
					<p class="mt-3 text-sm text-gray-500">We will get back to you as soon as possible.</p>
				</div>
				<div class="space-y-6">
					<div>
						<label for="full_name" class="mb-2 block text-gray-600">Full Name</label>
						<input type="text" name="full_name" id="full_name" autocomplete="user" class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 text-gray-600 transition-shadow duration-300 invalid:ring-2 invalid:ring-red-400 focus:ring-2" placeholder="Your Full Name" />
						<span class="mt-1 hidden text-sm text-red-500 peer-invalid:block">Helper</span>
					</div>
					<div>
						<label for="email" class="mb-2 block text-gray-600">Email address</label>
						<input type="email" name="email" id="email" autocomplete="user" class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 text-gray-600 transition-shadow duration-300 invalid:ring-2 invalid:ring-red-400 focus:ring-2" placeholder="Your Email" />
						<span class="mt-1 hidden text-sm text-red-500 peer-invalid:block">Helper</span>
					</div>
					<div>
						<label for="phone" class="mb-2 block text-gray-600">Phone number (available on WhatsApp)</label>
						<input type="tel" name="phone" id="phone" autocomplete="tel" class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 text-gray-600 transition-shadow duration-300 invalid:ring-2 invalid:ring-red-400 focus:ring-2" placeholder="Your phone number" />
						<span class="mt-1 hidden text-sm text-red-500 peer-invalid:block">Helper</span>
					</div>
					<div>
						<label for="message" class="mb-2 block text-gray-600">Message</label>
						<textarea name="message" id="message" class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2 text-gray-600 transition-shadow duration-300 invalid:ring-2 invalid:ring-red-400 focus:ring-2" rows="5"></textarea>
						<span class="mt-1 hidden text-sm text-red-500 peer-invalid:block">Helper</span>
					</div>
				</div>
				<div class="flex space-x-4">
					<button type="button" id="cancel-button" class="relative flex h-12 w-full items-center justify-center rounded-full border border-red-500 bg-white px-8 text-red-500 before:absolute before:inset-0 before:rounded-full before:transition before:duration-300 hover:before:scale-105 active:duration-75 active:before:scale-95">
						<span class="relative text-base font-semibold">Cancel</span>
					</button>
					<button class="relative flex h-12 w-full items-center justify-center px-8 before:absolute before:inset-0 before:rounded-full before:bg-primary before:transition before:duration-300 hover:before:scale-105 active:duration-75 active:before:scale-95">
						<span class="relative text-base font-semibold text-white">Submit</span>
					</button>
				</div>
			</form>
		</div>
	</div>
</div>

<script>
	import intlTelInput from 'intl-tel-input'

	document.addEventListener('DOMContentLoaded', function () {
		const phoneInputField = document.querySelector('#phone')
		intlTelInput(phoneInputField as HTMLInputElement, {
			initialCountry: 'us',
			utilsScript: 'https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js'
		})

		const modal = document.getElementById('contact-modal')
		const closeModal = () => {
			modal.classList.add('hidden')
			modal.classList.remove('opacity-100')
			modal.classList.add('opacity-0')
		}

		document.getElementById('close-modal').addEventListener('click', closeModal)
		document.getElementById('cancel-button').addEventListener('click', closeModal)
	})
</script>
